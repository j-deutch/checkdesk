(function(){"use strict";var scripts=document.getElementsByTagName("script"),script=scripts[scripts.length-1],hashToken="#"+Math.random().toString(36).substring(2),params,url,iframe,i;function getParams(query){var match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},p={};while(match=search.exec(query)){p[decode(match[1])]=decode(match[2])}return p}params=/\?/.test(script.src)?getParams(script.src.split("?")[1]):false;if(!params||!params.u){throw"Meedan: No embeddable URL provided."}url=params.u;delete params.u;if(!/:\/\//.test(url)){url=script.src.match(/http[s]?:\/\/[^\/]+/)[0]+url}url.replace(/#.*$/,"");url+=hashToken;iframe=document.createElement("IFRAME");iframe.setAttribute("src",url);iframe.setAttribute("frameborder","0");iframe.setAttribute("scrolling","no");iframe.setAttribute("seamless","");for(i in params){if(params.hasOwnProperty(i)){iframe.setAttribute(i,params[i])}}script.parentNode.insertBefore(iframe,script.nextSibling);var MessageHandler={handleMessage:function(e){var data=e.data.split(";"),childToken=data.shift(),type=data.shift();if(!childToken||childToken!==hashToken){return}switch(type){case"loaded":MessageHandler.handleLoadedMessage(data);break;case"setHeight":MessageHandler.handleSetHeightMessage(data);break}},handleLoadedMessage:function(data){},handleSetHeightMessage:function(data){if(data[0]){iframe.style.height=data[0]+"px"}MessageHandler.api("postSetHeight",data)},api:function(type,data){var event;if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent(type,true,true)}else{event=document.createEventObject();event.eventType=type}event.data=data||{};if(document.createEvent){iframe.dispatchEvent(event)}else{iframe.fireEvent("on"+event.eventType,event)}}};if(!window.addEventListener){window.attachEvent("onmessage",MessageHandler.handleMessage)}else{window.addEventListener("message",MessageHandler.handleMessage,false)}})();