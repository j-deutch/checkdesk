<?php

/**
 * Implements hook_entity_info_alter();
 */
function checkdesk_media_entity_info_alter(&$entity_info) {
  $entity_info['file']['view modes']['embed'] = array(
  'label' => t('Embed'),
  'custom settings' => TRUE,
  );
}

/**
 * Implements hook_wysiwyg_editor_settings_alter();
 */
function checkdesk_media_wysiwyg_editor_settings_alter(&$settings, &$context) {
  if($context['profile']->editor == 'ckeditor') {
    $settings['extraAllowedContent'] = 'img(*)[*]'; // enable img tag in CKEditor
    $settings['removePlugins'] = 'image';           // disable image properties dialog
  }
}

/**
 * Implements hook_form_form_id_alter();
 */
function checkdesk_media_form_media_wysiwyg_format_form_alter(&$form, &$form_state) {
  drupal_add_css('.form-item-format {display: none;}', array('type' => 'inline')); // hide image view mode selection form item
}
